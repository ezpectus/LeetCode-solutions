##  2280. Minimum Lines to Represent a Line Chart  
**Slope Comparison — Detect Line Segment Changes**

---

###  Problem  
You are given a list of stock prices `stockPrices[i] = [day, price]`.  
Each point is plotted on an XY plane and connected to the next to form a line chart.  
Return the **minimum number of straight lines** needed to represent the chart.

---

###  Goal  
- Connect adjacent points with straight lines  
- Count how many **distinct lines** are needed  
- A new line is needed when the slope between three consecutive points changes

---

###  Architectural Triggers

| Trigger | Implication |
|--------|-------------|
| “Adjacent points” | Must sort by day |
| “Minimum lines” | Detect slope changes |
| “Large input size” | Avoid floating-point division |
| “Distinct days” | Sorting is safe and stable |

---

###  Algorithm Breakdown  
1. **Sort** the input by day (X-axis)  
2. **Initialize** line count = 1  
3. **Iterate** from the third point onward  
4. For each triple `(i-2, i-1, i)`, compare slopes using cross multiplication:  
   - `(y3 - y2) * (x2 - x1)` vs `(y2 - y1) * (x3 - x2)`  
   - If slopes differ → increment line count

---

###  Code (C++)

```cpp
class Solution {
public:
    int minimumLines(vector<vector<int>>& stockPrices) {
        int n = stockPrices.size();
        if (n == 1) return 0;

        sort(stockPrices.begin(), stockPrices.end());
        int count = 1;

        for (int i = 2; i < n; i++) {
            long long x1 = stockPrices[i][0], x2 = stockPrices[i - 1][0], x3 = stockPrices[i - 2][0];
            long long y1 = stockPrices[i][1], y2 = stockPrices[i - 1][1], y3 = stockPrices[i - 2][1];

            long long slope1 = (y3 - y2) * (x2 - x1);
            long long slope2 = (y2 - y1) * (x3 - x2);

            if (slope1 != slope2) count++;
        }

        return count;
    }
};
```

###  Complexity

| Metric | Value |
|--------|-------|
| Time   | O(n log n) — sorting + linear scan |
| Space  | O(1) — constant extra space |

---

###  Pitfalls & Fixes

| Issue                        | Fix                                                   |
|-----------------------------|--------------------------------------------------------|
| Floating-point slope comparison | Use cross multiplication with integers               |
| Unsorted input              | Sort by day before processing                         |
| Incorrect slope logic       | Compare `(y3 - y2)*(x2 - x1)` vs `(y2 - y1)*(x3 - x2)` |

---

###  Insight

This is a slope stability detection problem. It combines:

- Sorting by X-axis  
- Slope comparison via cross multiplication  
- Segment counting based on slope changes

---

###  Fichka Library Entry

**Geometry / Line Chart**  
> Count minimum segments in a line chart by detecting slope changes — sort + cross product


---
