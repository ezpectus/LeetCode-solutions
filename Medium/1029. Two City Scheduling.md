# 1029. Two City Scheduling — Architectural Greedy Cost Difference Sorting  
*O(n log n) — Optimal Sort-Based Assignment*

---

## Problem Statement

Given `2n` people, each with costs `[aCost, bCost]` to fly to city A or B.

Fly **exactly n** people to **each city**.

Return **minimum total cost**.

---

## Core Idea — Greedy Assignment by Cost Difference

**Key insight**:
- We must send **n** to A and **n** to B
- For each person: **difference** `diff = aCost - bCost`
  - Positive → cheaper to send to B
  - Negative → cheaper to send to A

**Greedy strategy**:
- Sort people by **absolute difference** `|aCost - bCost|` **descending**
- Or equivalently: sort by `aCost - bCost` **ascending**
- Send first n to A, last n to B? No.

**Better**:
- Default: send all to A → cost = sum of all aCosts
- For each person, **saving** if send to B instead of A = `aCost - bCost`
- To minimize total → maximize **savings** by sending n people with **largest savings** to B

**Steps**:
1. Compute **saving** = `aCost - bCost` for each
2. Sort people by **saving descending** (largest saving first)
3. Send **first n** to B (max saving)
4. Send **last n** to A

**Equivalent**:
- Sort by `bCost - aCost` ascending → first n to B

---

## Implementation (C#)

```csharp
public class Solution {
    public int TwoCitySchedCost(int[][] costs) {
        Array.Sort(costs, (a, b) => a[0] - a[1] - (b[0] - b[1]));
        int total = 0;
        int n = costs.Length / 2;
        for (int i = 0; i < n; i++)  total += costs[i][0] + costs[i + n][1];
        
        return total;
    }
}
```
## Complexity

| **Metric**            | **Value**             | **Notes**                                      |
|-----------------------|-----------------------|------------------------------------------------|
| **Time Complexity**   | **O(n log n)**        | Sorting dominates                              |
| **Space Complexity**  | **O(1)**              | In-place sort                                  |

**Optimal** — sorting required.

---

## Why This Works — Example Walkthrough

**Input**: `costs = [[10,20],[30,200],[400,50],[30,20]]`

- diff (a-b): **-10**, **-170**, **+350**, **+10**
- Sort by diff **descending** (largest saving first):
  - [400,50] (+350)
  - [30,20] (+10)
  - [10,20] (-10)
  - [30,200] (-170)
- n=2
- Send **first 2** to B (max saving): 50 + 20 = **70**
- Send **last 2** to A: 10 + 30 = **40**
- Total = **110**

**Correct**.

**Input**: `[[259,770],[448,54],[926,667],[184,139]]`

- Compute diffs → sort by saving descending → assign first n to B → total **1859**

**Correct**.

---

## Pitfalls & Edge Cases

- **All prefer A** → still send n to B (constraint)
- **Equal costs** → order doesn't matter
- **n=1** → trivial assignment
- **Large diffs** → greedy correctly maximizes saving

All handled perfectly.

---

## Key Takeaway

This is a **beautifully greedy** assignment problem:

- **Cost difference** → saving by choosing B over A
- **Sort by saving** → assign max savers to B
- **Balance constraint** → exactly n each

**No DP needed** — pure greedy.
**Pure, clean, optimal** — one of the best greedy scheduling problems.

---
