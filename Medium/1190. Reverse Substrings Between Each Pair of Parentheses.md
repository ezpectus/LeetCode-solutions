# 1190. Reverse Substrings Between Each Pair of Parentheses

---

## Problem Restatement
We are given a string `s` containing lowercase letters and balanced parentheses.  
We must reverse substrings inside each pair of parentheses, starting from the innermost, and return the final string **without parentheses**.

---


## Key Idea
- Use a **stack** to handle nested parentheses.  
- Traverse the string:
  - If character is `(` → push current string onto stack, reset current builder.  
  - If character is `)` → reverse current builder, pop from stack, and append.  
  - Otherwise → append character to current builder.  
- At the end, the builder contains the final string.

---

## Code (C#)
```csharp
public class Solution {
    public string ReverseParentheses(string s) {
        Stack<StringBuilder> stack = new Stack<StringBuilder>();
        StringBuilder current = new StringBuilder();

        foreach (char c in s) {
            if (c == '(') {
                stack.Push(current);
                current = new StringBuilder();
            } else if (c == ')') {
                char[] arr = current.ToString().ToCharArray();
                Array.Reverse(arr);
                StringBuilder reversed = new StringBuilder(new string(arr));
                current = stack.Pop().Append(reversed);
            } else {
                current.Append(c);
            }
        }

        return current.ToString();
    }
}
```


## Time Complexity
- **Traversal:** Each character in the string is processed once.  
- **Reversal:** Each substring is reversed at most once.  
- **Overall:** **O(n)**, where n = length of the string.  

---

## Space Complexity
- **Stack:** Stores intermediate string builders for nested parentheses.  
- **Builders:** Temporary storage for substrings.  
- **Overall:** **O(n)**.  

---

## Example Walkthrough

### Example 1
**Input:** `"(abcd)"`  
- Inner substring = `"abcd"` → reversed = `"dcba"`  
✅ Output = `"dcba"`  

---

### Example 2
**Input:** `"(u(love)i)"`  
- Inner substring = `"love"` → reversed = `"evol"`  
- Outer substring = `"uevoli"` → reversed = `"iloveu"`  
✅ Output = `"iloveu"`  

---

### Example 3
**Input:** `"(ed(et(oc))el)"`  
- `"oc"` → `"co"`  
- `"etco"` → `"octe"`  
- `"edocte el"` → `"leetcode"`  
✅ Output = `"leetcode"`  

---

## Why This Works
- **Stack-based approach:** Handles nested parentheses correctly by isolating substrings.  
- **Innermost-first reversal:** Ensures proper order of operations.  
- **Discarding parentheses:** Only the reversed content remains in the final string.  

---

## Edge Cases
- **Single pair:** `"(a)"` → `"a"`.  
- **Multiple groups:** `"(ab)(cd)"` → `"ba dc" → "badc"`.  
- **Deep nesting:** `"((abc))"` → `"cba"`.  
- **No parentheses:** `"abc"` → `"abc"`.  

---

✅ **Conclusion**  
This is the **Stack-Based Nested Reversal Algorithm**.  
By pushing and popping builders at each parenthesis, we reverse substrings from the innermost outward in **O(n)** time and **O(n)** space, producing the correct string without brackets.


---

