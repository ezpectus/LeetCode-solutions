# 3623. Count Number of Trapezoids I

---

## Problem Restatement
We are given a set of points on the Cartesian plane.  
We need to count the number of **unique horizontal trapezoids** that can be formed.  

A trapezoid here is defined as a convex quadrilateral with at least one pair of **horizontal sides** (parallel to the x-axis).

Return the count modulo `10^9 + 7`.

---

## Key Insight
- A horizontal trapezoid requires **two distinct y-levels** (rows).  
- On each y-level, we need to pick **two distinct x-coordinates** to form the horizontal sides.  
- Then, combining two pairs from different y-levels gives a trapezoid.

### Step 1: Group points by y-coordinate
- For each y, collect all x-values.  
- If a row has fewer than 2 points, it cannot contribute.

### Step 2: Count possible pairs per row
- For a row with `c` points, number of ways to choose 2 = `C(c, 2) = c * (c - 1) / 2`.

### Step 3: Combine rows
- For each pair of distinct y-levels, multiply their pair counts.  
- Sum over all row pairs.

---

## Code (C#)
```csharp
public class Solution {
    private const int MOD = 1000000007;
    public int CountTrapezoids(int[][] points) {
        var dict = new Dictionary<int, int>();
        foreach (var p in points) {
            int y = p[1];
            if (!dict.ContainsKey(y)) dict[y] = 0;
            dict[y]++;
        }

        List<long> pairs = new List<long>();
        foreach (var kv in dict) {
            int c = kv.Value;
            if (c >= 2) {
                long ways = (long)c * (c - 1) / 2;
                pairs.Add(ways);
            }
        }
        long res = 0;
        long pref = 0;
        foreach (var val in pairs) {
            res = (res + val * pref) % MOD;
            pref = (pref + val) % MOD;
        }

        return (int)res;
    }
}
```



## Complexity
- **Time:** O(n), because we only group points by y-level and compute combinations.  
- **Space:** O(n), storing counts per y-level in a dictionary.  

---

## Example Walkthrough

**Input:** `points = [[1,0],[2,0],[3,0],[2,2],[3,2]]`  
- y = 0 → 3 points → C(3,2) = 3 pairs  
- y = 2 → 2 points → C(2,2) = 1 pair  
- Total trapezoids = 3 * 1 = **3 ✅**

**Input:** `points = [[0,0],[1,0],[0,1],[2,1]]`  
- y = 0 → 2 points → 1 pair  
- y = 1 → 2 points → 1 pair  
- Total trapezoids = 1 * 1 = **1 ✅**

---

## Conclusion
The algorithm works by:
1. Grouping points by their y-coordinate.  
2. Counting possible horizontal pairs per row.  
3. Multiplying across distinct rows to form trapezoids.  

This yields an **efficient O(n) solution**, scalable to 100,000 points, while keeping memory usage linear.  


---

