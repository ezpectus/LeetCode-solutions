# 1338. Reduce Array Size to The Half — Architectural Greedy Frequency Sorting  
*O(n log n) — Optimal Count + Sort Most Frequent*

---

## Problem Statement

Given array `arr` (even length).

Remove **all occurrences** of some integers.

Goal: remove **at least half** elements → remaining ≤ `n/2`

Return **minimum** number of distinct integers to remove.

---

## Core Idea — Greedy: Remove Most Frequent Elements

**Key insight**:
- To remove **maximum** elements with **fewest** distinct values → pick **most frequent** numbers
- Count frequency of each number
- Sort frequencies **descending**
- Add largest frequencies until sum ≥ `n/2`

**Minimum** count of such numbers → answer.

---

##  Implementation (C#)

```csharp
public class Solution {
    public int MinSetSize(int[] arr) {
        int n = arr.Length;
        int target = n / 2; // need to remove at least this many

        // Count freq
        var freq = new Dictionary<int, int>();
        foreach (int num in arr) {
            freq.TryAdd(num, 0);
            freq[num]++;
        }

        // Sort frequencies desc
        var counts = freq.Values.OrderByDescending(x => x).ToList();
        int removed = 0;
        int setSize = 0;
        foreach (int count in counts) {
            removed += count;
            setSize++;

            if (removed >= target)  return setSize;
        }

        return setSize; 
    }
}
```
## Complexity

| **Metric**            | **Value**             | **Notes**                                      |
|-----------------------|-----------------------|------------------------------------------------|
| **Time Complexity**   | **O(n log n)**        | n counts + sort up to n frequencies            |
| **Space Complexity**  | **O(n)**              | Frequency dictionary                           |

**Optimal** — sorting necessary for greedy choice.

---

## Why This Works — Example Walkthrough

**Input**: `arr = [3,3,3,3,5,5,5,2,2,7]`

- n = 10 → target remove ≥ 5
- Frequencies: 3:4, 5:3, 2:2, 7:1
- Sorted descending: **4, 3, 2, 1**
- Remove 3 (4 elements) → removed = 4
- Remove 5 (3 elements) → removed = 7 ≥ 5 → **2**

**Correct** — set {3,5}

**Input**: all same value (e.g., all 7s)

- One frequency = n → remove 1 type → **1**

**Correct**.

---

## Pitfalls & Edge Cases

- **All elements same** → answer = 1
- **All elements unique** → answer = n/2
- **Even n** → remove exactly n/2 or more elements
- **Large n (10⁵)** → efficient counting and sorting

All handled perfectly.

---

## Key Takeaway

This is a **beautifully greedy** frequency problem:

- **Count occurrences**
- **Sort frequencies descending**
- **Take largest** until at least half elements removed

**No complex DP needed** — pure greedy.
**Pure, clean, optimal** — perfect frequency greedy.

---
