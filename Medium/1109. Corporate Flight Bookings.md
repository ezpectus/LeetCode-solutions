# 1109. Corporate Flight Bookings

---

## Problem Summary
We are given:
- `n` flights labeled from 1 to `n`.
- An array `bookings`, where each booking is `[first, last, seats]` meaning that **each flight from `first` to `last` inclusive** has `seats` reserved.

We must return an array `answer` of length `n`, where `answer[i]` is the total number of seats reserved for flight `i+1`.

---

## Code Idea
This is a **range update problem**:
1. **Naive approach**: For each booking, add `seats` to every flight in `[first, last]`.  
   - Complexity: O(n × bookings.length) → too slow for n = 20,000.

2. **Efficient approach (Difference Array)**:
   - Use an array `diff` of length `n+1`.  
   - For each booking `[first, last, seats]`:  
     - `diff[first-1] += seats`  
     - `diff[last] -= seats` (to cancel after `last`).  
   - Then compute prefix sum over `diff` to get final seat counts.

---

## Code (C#)
```csharp
public class Solution {
    public int[] CorpFlightBookings(int[][] bookings, int n) {
        int[] diff = new int[n + 1];

        foreach (var booking in bookings) {
            int first = booking[0];
            int last = booking[1];
            int seats = booking[2];

            diff[first - 1] += seats;
            diff[last] -= seats;
        }

        int[] result = new int[n];
        int curr = 0;
        for (int i = 0; i < n; i++) {
            curr += diff[i];
            result[i] = curr;
        }

        return result;
    }
}
```


## Complexity
- **Time:** O(n + bookings.length), since we only process each booking once and then compute a prefix sum.  
- **Space:** O(n) for the difference array.  

---

## Pitfalls
- Must use a **difference array** to avoid the naive O(n × m) approach.  
- Be careful with indexing: flights are **1-indexed** in the input, but arrays are **0-indexed**.  
- Ensure subtraction at the `last` index to cancel seats after the range.  
- Edge case: single flight booking must still be handled correctly.  

---

## Example Walkthrough
**Input:** `bookings = [[1,2,10],[2,3,20],[2,5,25]], n = 5`  

- Updates applied to `diff`:  
  `[10, 15, 20, 0, 0, -65]`  

- Prefix sum reconstruction:  
  `[10, 55, 45, 25, 25]`  

**Output:** `[10,55,45,25,25]`  

---

**Input:** `bookings = [[1,2,10],[2,2,15]], n = 2`  

- Updates applied to `diff`:  
  `[10, 15, -25]`  

- Prefix sum reconstruction:  
  `[10, 25]`  

**Output:** `[10,25]`  

---

## Conclusion
This problem reduces to a **range update with difference array**.  
- Efficient O(n + m) solution.  
- Handles large inputs cleanly.  
- Prefix sum reconstructs the final seat reservations for each flight.  



---
