# 1453. Maximum Number of Darts Inside of a Circular Dartboard

---

## Problem Restatement
We are given `n` dart positions on a 2D plane and a dartboard radius `r`.  
We need to place the dartboard optimally so that the maximum number of darts lie inside or on the circle.  

---

## Key Insight
- The circle must pass through **at least two points** (except trivial case with one point).  
- For each pair of points:
  1. Check if the distance between them ≤ 2r.  
  2. If yes, compute possible circle centers that place both points on the circumference.  
  3. For each center, count how many points lie inside the circle.  
- Keep track of the maximum count.  

This works because the optimal circle is always defined by one or two boundary points.

---

## Code (C#)
```csharp
public class Solution {
    public int NumPoints(int[][] darts, int r) {
        int n = darts.Length;
        if (n == 1) return 1;
        int res = 1;

        for (int i = 0; i < n; i++) {
            for (int j = i + 1; j < n; j++) {
                double dx = darts[i][0] - darts[j][0];
                double dy = darts[i][1] - darts[j][1];
                double d = Math.Sqrt(dx * dx + dy * dy);

                if (d > 2.0 * r) continue;

                // Midpoint
                double midx = (darts[i][0] + darts[j][0]) / 2.0;
                double midy = (darts[i][1] + darts[j][1]) / 2.0;

                // Distance from midpoint to center
                double h = Math.Sqrt(r * r - (d / 2.0) * (d / 2.0));

                // Normalize perpendicular vector
                double vx = -dy / d;
                double vy = dx / d;

                // Two possible centers
                double cx1 = midx + h * vx;
                double cy1 = midy + h * vy;
                double cx2 = midx - h * vx;
                double cy2 = midy - h * vy;

                res = Math.Max(res, CountInside(darts, cx1, cy1, r));
                res = Math.Max(res, CountInside(darts, cx2, cy2, r));
            }
        }

        return res;
    }

    private int CountInside(int[][] darts, double cx, double cy, int r) {
        int count = 0;
        double r2 = r * r + 1e-7; // tolerance
        foreach (var p in darts) {
            double dx = p[0] - cx;
            double dy = p[1] - cy;
            if (dx * dx + dy * dy <= r2) count++;
        }
        return count;
    }
}
```



## Complexity
- **Time:** O(n³) in the worst case, since for each pair of points (O(n²)) we may count all points (O(n)).  
- With n ≤ 100, this is computationally feasible.  
- **Space:** O(1), only a few variables are used for calculations.  

---

## Example Walkthrough

**Input:** `darts = [[-2,0],[2,0],[0,2],[0,-2]], r = 2`  
- Circle centered at (0,0), radius = 2.  
- All 4 points lie inside.  
- **Output = 4 ✅**

**Input:** `darts = [[-3,0],[3,0],[2,6],[5,4],[0,9],[7,8]], r = 5`  
- Optimal circle centered at (0,4).  
- Contains 5 points.  
- **Output = 5 ✅**

---

## Conclusion
The algorithm leverages **geometry and circle construction from pairs of points**:  
- Ensures correctness by testing all candidate centers.  
- Efficient enough for n ≤ 100, making O(n³) acceptable.  
- Guarantees the maximum number of darts inside the dartboard is found.  


---
