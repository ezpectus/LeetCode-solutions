# 2448. Minimum Cost to Make Array Equal — Weighted Median Strategy

---

## Origin & Motivation

We are given two integer arrays of equal length:
- nums[i]: initial values
- cost[i]: cost to increment or decrement nums[i] by 1

The goal is to make all elements in nums equal, using any number of operations, such that the total cost is minimized.

Each operation on nums[i] costs cost[i] per unit change.  
This is a classic weighted alignment problem: we want to align all values to a single target, minimizing the weighted sum of absolute distances.

---

## Use Cases

- Weighted median alignment in cost-sensitive systems  
- Efficient transformation of non-uniform data  
- Greedy scan over sorted values with prefix accumulation  
- Optimization of cost functions without brute-force simulation

---

## Core Architecture

### Triggers and Transitions

| Condition                        | Architectural Role              |
|----------------------------------|----------------------------------|
| Pair (nums[i], cost[i])          | Encodes value-weight structure  |
| Sort by nums[i]                  | Enables ordered prefix scan     |
| Accumulate cost from left        | Tracks cumulative weight        |
| Reach half of total cost         | Locks weighted median           |
| Compute total cost to align      | Uses absolute distance formula  |

---

### Algorithm Steps

1. Pair each nums[i] with its corresponding cost[i]  
2. Sort the pairs by nums[i] in ascending order  
3. Compute the total sum of all cost[i]  
4. Perform a left-to-right scan, accumulating cost  
5. Stop when cumulative cost is greater than or equal to totalCost / 2  
6. Lock the current nums[i] as the weighted median target  
7. Compute total cost to align all elements to this target using absolute distance times weight

---

## C# Implementation

```csharp
public class Solution {
    public long MinCost(int[] nums, int[] cost) {
        int n = nums.Length;
        var pairs = new List<(int val, int weight)>();
        for (int i = 0; i < n; i++)
            pairs.Add((nums[i], cost[i]));

        pairs.Sort((a, b) => a.val.CompareTo(b.val));

        long total = 0;
        foreach (var p in pairs)
            total += p.weight;

        long prefix = 0;
        int target = 0;

        foreach (var p in pairs) {
            prefix += p.weight;
            if (prefix >= (total + 1) / 2) {
                target = p.val;
                break;
            }
        }

        long res = 0;
        foreach (var p in pairs)
            res += (long)Math.Abs(p.val - target) * p.weight;

        return res;
    }
}
```

## Complexity Analysis

| Phase         | Time Complexity | Space Complexity | Notes                                           |
|---------------|------------------|------------------|--------------------------------------------------|
| Pairing       | O(n)             | O(n)             | Create value-cost pairs                         |
| Sorting       | O(n log n)       | O(n)             | Sort by value                                   |
| Prefix Scan   | O(n)             | O(1)             | Find weighted median                            |
| Cost Compute  | O(n)             | O(1)             | Aggregate total cost to align                   |
| Total         | O(n log n)       | O(n)             | Efficient for large inputs                      |

---

## Pitfalls and Clarifications

- Sorting by value is essential — alignment depends on order  
- The optimal target is the weighted median, not the arithmetic mean  
- Avoid simulating individual operations — compute cost directly  
- The median is locked when cumulative cost reaches at least half  
- Brute-force approaches are inefficient — prefix scan is optimal

---

## Conclusion

This problem is a structured weighted alignment task. The optimal strategy is to:

- Pair values with their costs  
- Sort and scan to find the weighted median  
- Compute total cost to align all elements to that target

This approach is clean, scalable, and avoids unnecessary computation.  
When cost varies per element, aligning to the weighted median yields the minimum total cost.


---
